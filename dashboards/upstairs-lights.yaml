views:
  - title: Home
    sections:
      - type: grid
        cards:
          - type: picture-elements
            image: /local/images/upstairs/base.png
            grid_options:
              columns: full
            elements:
              - type: image
                image: /local/images/upstairs/bathroom-red.png
                tap_action:
                  action: none
                hold_action:
                  action: none
                style:
                  transform: inherit
                  top: 0%
                  width: 100%
                  mix-blend-mode: lighten
                card_mod:
                  style: >
                    {% set light = 'light.bathroom' %}

                    {% set color = state_attr(light, 'hs_color') or [27.72,
                    55.11] %}

                    {% set hue_adj = 0 if state_attr(light, 'color_mode') ==
                    'xy' else 25  %}

                    {% set sat_mul = 1 if state_attr(light, 'color_mode') ==
                    'xy' else 0.5 %}

                    hui-image {
                      opacity: {{ state_attr(light, 'brightness') / 255 if states(light) == 'on' else '0' }};
                      filter: hue-rotate({{ (color[0] + hue_adj)|round(2) }}deg) saturate({{ min(color[1]|round(2) * sat_mul, 100 ) }}%);
                    }
              - type: image
                image: /local/images/upstairs/amy-red.png
                tap_action:
                  action: none
                hold_action:
                  action: none
                style:
                  transform: inherit
                  top: 0%
                  width: 100%
                  mix-blend-mode: lighten
                card_mod:
                  style: >
                    {% set light = 'light.amy_s_light' %}

                    {% set color = state_attr(light, 'hs_color') or [27.72,
                    55.11] %}

                    {% set hue_adj = 0 if state_attr(light, 'color_mode') ==
                    'xy' else 25  %}

                    {% set sat_mul = 1 if state_attr(light, 'color_mode') ==
                    'xy' else 0.5 %}

                    hui-image {
                      opacity: {{ state_attr(light, 'brightness') / 255 if states(light) == 'on' else '0' }};
                      filter: hue-rotate({{ (color[0] + hue_adj)|round(2) }}deg) saturate({{ min(color[1]|round(2) * sat_mul, 100 ) }}%);
                    }
              - type: image
                image: /local/images/upstairs/bed-red.png
                tap_action:
                  action: none
                hold_action:
                  action: none
                style:
                  transform: inherit
                  top: 0%
                  width: 100%
                  mix-blend-mode: lighten
                card_mod:
                  style: >
                    {% set light = 'light.bed_lights' %}

                    {% set color = state_attr(light, 'hs_color') or [27.72,
                    55.11] %}

                    {% set hue_adj = 0 if state_attr(light, 'color_mode') ==
                    'xy' else 25  %}

                    {% set sat_mul = 1 if state_attr(light, 'color_mode') ==
                    'xy' else 0.5 %}

                    hui-image {
                      opacity: {{ state_attr(light, 'brightness') / 255 if states(light) == 'on' else '0' }};
                      filter: hue-rotate({{ (color[0] + hue_adj)|round(2) }}deg) saturate({{ min(color[1]|round(2) * sat_mul, 100 ) }}%);
                    }
              - type: image
                image: /local/images/upstairs/wall-red.png
                tap_action:
                  action: none
                hold_action:
                  action: none
                style:
                  transform: inherit
                  top: 0%
                  width: 100%
                  mix-blend-mode: lighten
                card_mod:
                  style: >
                    {% set light = 'light.wall' %}

                    {% set color = state_attr(light, 'hs_color') or [27.72,
                    55.11] %}

                    {% set hue_adj = 0 if state_attr(light, 'color_mode') ==
                    'xy' else 25  %}

                    {% set sat_mul = 1 if state_attr(light, 'color_mode') ==
                    'xy' else 0.5 %}

                    hui-image {
                      opacity: {{ state_attr(light, 'brightness') / 255 if states(light) == 'on' else '0' }};
                      filter: hue-rotate({{ (color[0] + hue_adj)|round(2) }}deg) saturate({{ min(color[1]|round(2) * sat_mul, 100 ) }}%);
                    }
              - type: image
                image: /local/images/upstairs/simon-red.png
                tap_action:
                  action: none
                hold_action:
                  action: none
                style:
                  transform: inherit
                  top: 0%
                  width: 100%
                  mix-blend-mode: lighten
                card_mod:
                  style: >
                    {% set light = 'light.simon_s_light' %}

                    {% set color = state_attr(light, 'hs_color') or [27.72,
                    55.11] %}

                    {% set hue_adj = 0 if state_attr(light, 'color_mode') ==
                    'xy' else 25  %}

                    {% set sat_mul = 1 if state_attr(light, 'color_mode') ==
                    'xy' else 0.5 %}

                    hui-image {
                      opacity: {{ state_attr(light, 'brightness') / 255 if states(light) == 'on' else '0' }};
                      filter: hue-rotate({{ (color[0] + hue_adj)|round(2) }}deg) saturate({{ min(color[1]|round(2) * sat_mul, 100 ) }}%);
                    }
              - type: image
                image: /local/images/upstairs/wardrobe-red.png
                tap_action:
                  action: none
                hold_action:
                  action: none
                style:
                  transform: inherit
                  top: 0%
                  width: 100%
                  mix-blend-mode: lighten
                card_mod:
                  style: >
                    {% set light = 'light.wardrobe_light' %}

                    {% set color = state_attr(light, 'hs_color') or [27.72,
                    55.11] %}

                    {% set hue_adj = 0 if state_attr(light, 'color_mode') ==
                    'xy' else 25  %}

                    {% set sat_mul = 1 if state_attr(light, 'color_mode') ==
                    'xy' else 0.5 %}

                    hui-image {
                      opacity: {{ state_attr(light, 'brightness') / 255 if states(light) == 'on' else '0' }};
                      filter: hue-rotate({{ (color[0] + hue_adj)|round(2) }}deg) saturate({{ min(color[1]|round(2) * sat_mul, 100 ) }}%);
                    }
              - type: image
                image: /local/images/upstairs/panel-red.png
                tap_action:
                  action: none
                hold_action:
                  action: none
                style:
                  transform: inherit
                  top: 0%
                  width: 100%
                  mix-blend-mode: lighten
                card_mod:
                  style: >
                    {% set light = 'light.harry_s_panel' %}

                    {% set color = state_attr(light, 'hs_color') or [27.72,
                    55.11] %}

                    {% set hue_adj = 0 if state_attr(light, 'color_mode') ==
                    'xy' else 25  %}

                    {% set sat_mul = 1 if state_attr(light, 'color_mode') ==
                    'xy' else 0.5 %}

                    hui-image {
                      opacity: {{ state_attr(light, 'brightness') / 255 if states(light) == 'on' else '0' }};
                      filter: hue-rotate({{ (color[0] + hue_adj)|round(2) }}deg) saturate({{ min(color[1]|round(2) * sat_mul, 100 ) }}%);
                    }
              - type: image
                image: /local/images/upstairs/bedroom-red.png
                tap_action:
                  action: none
                hold_action:
                  action: none
                style:
                  transform: inherit
                  top: 0%
                  width: 100%
                  mix-blend-mode: lighten
                card_mod:
                  style: >
                    {% set light = 'light.bedroom' %}

                    {% set color = state_attr(light, 'hs_color') or [27.72,
                    55.11] %}

                    {% set hue_adj = 0 if state_attr(light, 'color_mode') ==
                    'xy' else 25  %}

                    {% set sat_mul = 1 if state_attr(light, 'color_mode') ==
                    'xy' else 0.5 %}

                    hui-image {
                      opacity: {{ state_attr(light, 'brightness') / 255 if states(light) == 'on' else '0' }};
                      filter: hue-rotate({{ (color[0] + hue_adj)|round(2) }}deg) saturate({{ min(color[1]|round(2) * sat_mul, 100 ) }}%);
                    }
              - type: image
                image: /local/images/upstairs/upstairs-red.png
                tap_action:
                  action: none
                hold_action:
                  action: none
                style:
                  transform: inherit
                  top: 0%
                  width: 100%
                  mix-blend-mode: lighten
                card_mod:
                  style: |
                    {% set light = 'light.upstairs' %}
                    {% set color = [27.72, 55.11] %}
                    {% set hue_adj = 25 %}
                    {% set sat_mul = 0.5 %}
                    hui-image {
                      opacity: {{ state_attr(light, 'brightness') / 255 if states(light) == 'on' else '0' }};
                      filter: hue-rotate({{ (color[0] + hue_adj)|round(2) }}deg) saturate({{ min(color[1]|round(2) * sat_mul, 100 ) }}%);
                    }
              - type: image
                image: /local/images/upstairs/stairs-red.png
                tap_action:
                  action: none
                hold_action:
                  action: none
                style:
                  transform: inherit
                  top: 0%
                  width: 100%
                  mix-blend-mode: lighten
                card_mod:
                  style: |
                    {% set light = 'switch.stair_lights' %}
                    {% set color = [120, 100] %}
                    {% set hue_adj = 0 %}
                    {% set sat_mul = 0.5 %}
                    hui-image {
                      opacity: {{ '1' if states(light) == 'on' else '0' }};
                      filter: hue-rotate({{ (color[0] + hue_adj)|round(2) }}deg) saturate({{ min(color[1]|round(2) * sat_mul, 100 ) }}%);
                    }
              - type: custom:button-card
                entity: sensor.sonoff_a4800ba0b7_temperature
                show_name: false
                show_state: true
                show_icon: true
                size: 2em
                icon: >
                  [[[ if (states['sensor.sonoff_a4800ba0b7_work_state'].state ==
                  '1') return "mdi:radiator";
                        else return "mdi:radiator-off"; ]]]
                style:
                  left: 30%
                  top: 7%
              - type: custom:button-card
                entity: sensor.sonoff_a4800badea_temperature
                show_name: false
                show_state: true
                show_icon: true
                size: 2em
                icon: >
                  [[[ if (states['sensor.sonoff_a4800badea_work_state'].state ==
                  '1') return "mdi:radiator";
                        else return "mdi:radiator-off"; ]]]
                style:
                  left: 74%
                  top: 7%
              - type: custom:button-card
                entity: sensor.sonoff_a4800b9e1a_temperature
                show_name: false
                show_state: true
                show_icon: true
                size: 2em
                icon: >
                  [[[ if (states['sensor.sonoff_a4800b9e1a_work_state'].state ==
                  '1') return "mdi:radiator";
                        else return "mdi:radiator-off"; ]]]
                style:
                  left: 23%
                  top: 92%
              - type: custom:button-card
                entity: sensor.sonoff_a4800b6840_temperature
                show_name: false
                show_state: true
                show_icon: true
                size: 2em
                icon: >
                  [[[ if (states['sensor.sonoff_a4800b6840_work_state'].state ==
                  '1') return "mdi:radiator";
                        else return "mdi:radiator-off"; ]]]
                style:
                  left: 77%
                  top: 92%
              - type: custom:button-card
                entity: sensor.sonoff_a4800c364c_temperature
                show_name: false
                show_state: true
                show_icon: false
                style:
                  left: 49.5%
                  top: 52%
              - type: custom:button-card
                entity: sensor.outside_sensor_temperature
                show_name: false
                show_state: true
                show_icon: false
                style:
                  left: 10%
                  top: 5%
              - type: custom:button-card
                entity: switch.stair_lights
                show_name: false
                color: auto
                size: 2em
                state:
                  - value: 'on'
                    icon: mdi:led-strip-variant
                    color: green
                  - value: 'off'
                    icon: mdi:led-strip-variant-off
                    color: rgb(64,64,64)
                style:
                  left: 49.5%
                  top: 60%
                hold_action:
                  action: more-info
              - type: custom:button-card
                entity: light.wardrobe_light
                show_name: false
                color: auto
                size: 2em
                style:
                  left: 49.5%
                  top: 81%
                hold_action:
                  action: more-info
              - type: custom:button-card
                entity: light.harry_s_panel
                show_name: false
                color: auto
                size: 2em
                style:
                  left: 57%
                  top: 81%
                hold_action:
                  action: more-info
              - type: custom:button-card
                entity: light.bathroom
                show_name: false
                color: auto
                size: 2em
                style:
                  left: 53%
                  top: 17%
                hold_action:
                  action: more-info
              - type: custom:button-card
                entity: light.upstairs
                show_name: false
                color: auto
                size: 2em
                style:
                  left: 52%
                  top: 35%
                hold_action:
                  action: more-info
              - type: custom:button-card
                entity: light.amy_s_light
                show_name: false
                color: auto
                size: 2em
                style:
                  left: 28%
                  top: 20%
                hold_action:
                  action: more-info
              - type: custom:button-card
                entity: light.bed_lights
                show_name: false
                color: auto
                size: 2em
                style:
                  left: 22%
                  top: 34%
                hold_action:
                  action: more-info
              - type: custom:button-card
                entity: light.simon_s_light
                show_name: false
                color: auto
                size: 2em
                style:
                  left: 75%
                  top: 20%
                hold_action:
                  action: more-info
              - type: custom:button-card
                entity: light.wall
                show_name: false
                color: auto
                size: 2em
                style:
                  left: 87%
                  top: 36%
                hold_action:
                  action: more-info
              - type: custom:button-card
                entity: light.bedroom
                show_name: false
                color: auto
                size: 2em
                style:
                  left: 25%
                  top: 70%
                hold_action:
                  action: more-info
              - type: custom:button-card
                entity: light.harry_s_light
                show_name: false
                color: auto
                size: 2em
                style:
                  left: 75%
                  top: 70%
                hold_action:
                  action: more-info
          - type: glance
            entities:
              - entity: light.amy_s_light
              - entity: light.bathroom
              - entity: light.simon_s_light
          - type: glance
            entities:
              - entity: light.hall
              - entity: light.bedroom
              - entity: light.wardrobe_light
        column_span: 4
